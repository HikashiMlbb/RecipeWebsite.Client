<form [formGroup]="recipe" (ngSubmit)="onSubmit()">
    <h1 class="title">–°–æ–∑–¥–∞—Ç—å —Ä–µ—Ü–µ–ø—Ç</h1>
    <div class="recipe-content">
        <label>–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–∞:</label>
        <input
            [class.error-input]="recipe.controls['title'].invalid && recipe.controls['title'].touched"
            formControlName="title" 
            type="text" 
            placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ" />
        <span *ngIf="recipe.controls['title'].invalid && recipe.controls['title'].touched" class="error">
            –î–ª–∏–Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏—è —Ä–µ—Ü–µ–ø—Ç–∞ –¥–æ–ª–∂–Ω–∞ —Å–æ—Å—Ç–∞–≤–ª—è—Ç—å –æ—Ç {{ constraints.titleMinLength }} –¥–æ {{ constraints.titleMaxLength }} —Å–∏–º–≤–æ–ª–æ–≤.
        </span>
    </div>
    <div class="recipe-content">
        <label>–í—ã–±–µ—Ä–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–ª—é–¥–∞:</label>
        <label class="file-label-success" *ngIf="isFileChosen">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–æ!</label>
        <label class="file-label" *ngIf="!isFileChosen">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –µ—â—ë –Ω–µ –≤—ã–±—Ä–∞–Ω–æ.</label>
        <input style="display: none;" accept="image/png, image/jpeg" type="file" #fileUpload (change)="onFileUploaded($event)" />
        <input 
            [class.error-input]="recipe.controls['image'].invalid && recipe.controls['image'].touched" 
            class="file-input" 
            type="button" 
            value="–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª... üìé" 
            (click)="fileUpload.click()" />
        <span class="error" *ngIf="recipe.controls['image'].invalid && recipe.controls['image'].touched">
            –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ —Å–ø–∏—Å–∫–µ —Ä–µ—Ü–µ–ø—Ç–æ–≤.
        </span>
    </div>
    <div class="recipe-content">
        <label>–û–ø–∏—à–∏—Ç–µ —Ä–µ—Ü–µ–ø—Ç:</label>
        <textarea 
            [class.error-input]="recipe.controls['description'].invalid && recipe.controls['description'].touched"
            formControlName="description" 
            placeholder="–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–∞">
        </textarea>
        <span *ngIf="recipe.controls['description'].invalid && recipe.controls['description'].touched" class="error">
            –î–ª–∏–Ω–∞ –æ–ø–∏—Å–∞–Ω–∏—è —Ä–µ—Ü–µ–ø—Ç–∞ –¥–æ–ª–∂–Ω–∞ —Å–æ—Å—Ç–∞–≤–ª—è—Ç—å –æ—Ç {{ constraints.descriptionMinLength }} –¥–æ {{ constraints.descriptionMaxLength }} —Å–∏–º–≤–æ–ª–æ–≤.
        </span>
    </div>
    <div class="recipe-content">
        <label>–í—ã–±–µ—Ä–∏—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–µ—Ü–µ–ø—Ç–∞:</label>
        <select 
            [class.error-input]="recipe.controls['difficulty'].invalid && recipe.controls['difficulty'].touched"
            formControlName="difficulty">
            <option value="easy">–õ–µ–≥–∫–æ üî•</option>
            <option value="medium">–°—Ä–µ–¥–Ω–µ üî•üî•üî•</option>
            <option value="hard">–°–ª–æ–∂–Ω–æ üî•üî•üî•üî•üî•</option>
        </select>
        <span *ngIf="recipe.controls['difficulty'].invalid && recipe.controls['difficulty'].touched" class="error">
            –í—ã–±—Ä–∞—Ç—å —Å–ª–æ–∂–Ω–æ—Å—Ç—å –≤–∞—à–µ–≥–æ —Ä–µ—Ü–µ–ø—Ç–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è –µ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è.
        </span>
    </div>
    <div class="recipe-content">
        <label>–£–∫–∞–∂–∏—Ç–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≥–æ—Ç–æ–≤–∫–∏:</label>
        <div class="cooking-timespan">
            <div>
                <input
                    [class.error-input]="recipe.controls['hours'].invalid && recipe.controls['hours'].touched"
                    formControlName="hours" 
                    placeholder="–ß–∞—Å—ã" 
                    type="text" />
                <label>—á–∞—Å–æ–≤</label>
            </div>
            <div>
                <input
                    [class.error-input]="recipe.controls['minutes'].invalid && recipe.controls['minutes'].touched"
                    formControlName="minutes"
                    placeholder="–ú–∏–Ω—É—Ç—ã"
                    type="text" />
                <label>–º–∏–Ω—É—Ç</label>
            </div>
        </div>
        <span class="error" *ngIf="recipe.controls['hours'].invalid && recipe.controls['hours'].touched">
            –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∂–∏—Ç–µ, —Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤ –Ω—É–∂–Ω–æ –≥–æ—Ç–æ–≤–∏—Ç—å –ø–æ –≤–∞—à–µ–º—É —Ä–µ—Ü–µ–ø—Ç—É. –î–æ–ø—É—Å—Ç–∏–º–æ —É–∫–∞–∑–∞—Ç—å –æ—Ç {{ constraints.minHours }} –¥–æ {{ constraints.maxHours }} —á–∞—Å–æ–≤.
        </span>
        <span class="error" *ngIf="recipe.controls['minutes'].invalid && recipe.controls['minutes'].touched">
            –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∂–∏—Ç–µ, —Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç –Ω—É–∂–Ω–æ –≥–æ—Ç–æ–≤–∏—Ç—å –ø–æ –≤–∞—à–µ–º—É —Ä–µ—Ü–µ–ø—Ç—É. –î–æ–ø—É—Å—Ç–∏–º–æ —É–∫–∞–∑–∞—Ç—å –æ—Ç {{ constraints.minMinutes }} –¥–æ {{ constraints.maxMinutes }} –º–∏–Ω—É—Ç.
        </span>
    </div>
    <div formArrayName="ingredients" class="recipe-content ingredient-list">
        <label>–ü–µ—Ä–µ—á–∏—Å–ª–∏—Ç–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã –¥–ª—è –≤–∞—à–µ–≥–æ —Ä–µ—Ü–µ–ø—Ç–∞:</label>
        <div 
        *ngFor="let ingredient of ingredients.controls; let i = index;" 
        [formGroupName]="i" 
        class="ingredient-content">
            <div class="ingredient-content-form">
                <input 
                    [class.error-input]="ingredients.at(i).get('name')?.invalid && ingredients.at(i).get('name')?.touched"
                    formControlName="name" 
                    class="ingredient-title" 
                    type="text" 
                    placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" />
                <input 
                    [class.error-input]="ingredients.at(i).get('count')?.invalid && ingredients.at(i).get('count')?.touched"
                    formControlName="count" 
                    class="ingredient-count" 
                    type="text" 
                    placeholder="–ö–æ–ª-–≤–æ" />
                <select formControlName="type" class="ingredient-type">
                    <option value="grams">–ì—Ä–∞–º–º</option>
                    <option value="milliliters">–ú–∏–ª–ª–∏–ª–∏—Ç—Ä–æ–≤</option>
                    <option value="pieces">–®—Ç—É–∫</option>
                    <option value="cups">–°—Ç–∞–∫–∞–Ω–æ–≤</option>
                </select>
            </div>
            <span *ngIf="ingredients.at(i).get('name')?.invalid && ingredients.at(i).get('name')?.touched" class="error">
                –ù–∞–∑–≤–∞–Ω–∏–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–∞ –¥–æ–ª–∂–Ω–æ —Å–æ—Ç–∞–≤–ª—è—Ç—å –Ω–µ –º–µ–Ω–µ–µ {{ constraints.ingredientNameMinLength }} —Å–∏–º–≤–æ–ª–æ–≤, –Ω–æ –Ω–µ –±–æ–ª–µ–µ {{ constraints.ingredientNameMaxLength }} —Å–∏–º–≤–æ–ª–æ–≤.
            </span>
            <span *ngIf="ingredients.at(i).get('count')?.invalid && ingredients.at(i).get('count')?.touched" class="error">
                –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –æ—Ç {{ constraints.ingredientMinCount }} –¥–æ {{ constraints.ingredientMaxCount.toLocaleString().replaceAll(',', '.') }}.
            </span>
        </div>
        <div class="ingredient-content-control">
            <input (click)="deleteIngredient()" class="delete" type="button" value="–£–¥–∞–ª–∏—Ç—å" />
            <input (click)="addIngredient()" class="add" type="button" value="–î–æ–±–∞–≤–∏—Ç—å" />
        </div>
    </div>
    <div class="recipe-content">
        <label>–ü–æ–¥—Ä–æ–±–Ω–æ —Ä–∞—Å—Å–∫–∞–∂–∏—Ç–µ, –∫–∞–∫ –ø—Ä–∏–≥–æ—Ç–æ–≤–∏—Ç—å:</label>
        <textarea 
            [class.error-input]="recipe.controls['instruction'].invalid && recipe.controls['instruction'].touched"
            formControlName="instruction" 
            placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –∫ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—é">
        </textarea>
        <span class="error" *ngIf="recipe.controls['instruction'].invalid && recipe.controls['instruction'].touched">
            –î–ª–∏–Ω–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–æ–ª–∂–Ω–∞ —Å–æ—Å—Ç–∞–≤–ª—è—Ç—å –æ—Ç {{ constraints.instructionMinLength }} –¥–æ {{ constraints.instructionMaxLength }} —Å–∏–º–≤–æ–ª–æ–≤.
        </span>
    </div>
    <span *ngIf="isFormError" class="error">
        –ü—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–ø—ã—Ç–∫—É –ø–æ–∑–∂–µ.
    </span>
    <input [disabled]="isSubmitting" type="submit" value="–°–æ–∑–¥–∞—Ç—å" />
</form>